#!/bin/hush
# Start up file for DAHDI

case $1 in
	start) 	modprobe wcfxs;
		wctdm=`dahdi_scan | grep WCTDM`;
		if test -z $wctdm; then; modprobe dahdi_dummy; fi;
		dahdi_cfg;;
	stop) modprobe -r wcfxs;;
	restart) modprobe -r wcfxs;
		modprobe wcfxs;
		dahdi_cfg;;
	enable) rm -f /persistent/etc/rc.d/S40dahdi; 
	        ln -s /persistent/etc/init.d/dahdi /persistent/etc/rc.d/S40dahdi;;
	disable) rm -f /persistent/etc/rc.d/S40dahdi;;
        *) echo 'Syntax: /etc/init.d/dahdi [command]'
           echo ''
           echo '       Available commands:'
           echo '               start   Start the service'
           echo '               stop    Stop the service'
           echo '               restart Restart the service'
           echo '               enable  Enable service autostart'
           echo '               disable Disable service autostart'
esac
